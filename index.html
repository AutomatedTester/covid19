<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
<script src="covid19.js"></script>
<script>

    update().then(d => {
        let height = 600;
        let width = 1000;
        let margin = ({ top: 20, right: 20, bottom: 30, left: 30 });

        let data = d.data;
        let dates = data.map(function (obj) {
            return obj.date;
        });
        let deaths = data.map(function (obj) {
            return obj.deathsDaily;
        });

        let casesBySpecimenDate = data.map(function (obj) {
            return obj.casesBySpecimenDate;
        });

        let hospitalCases = data.map(function (obj) {
            return obj.hospitalCases;
        });

        let covidOccupiedMVBeds = data.map(obj => {
            return obj.covidOccupiedMVBeds;
        });

        let layout = {
            title: 'England Covid Data',
        };

        let config = {
            responsive: true,
            scrollZoom: true,
        }

        let plot = [
            { x: dates, y: deaths, type: 'scatter', mode: "lines", name: "Deaths", fill: 'tozeroy' },
            { x: dates, y: casesBySpecimenDate, type: "scatter", mode: "lines", name: "Cases by Specimen date", fill: 'tozeroy' },
            { x: dates, y: hospitalCases, type: "scatter", mode: "lines", name: "Hospital Cases", fill: 'tozeroy' },
            { x: dates, y: covidOccupiedMVBeds, type: "scatter", mode: "lines", name: "Occupied ITU Bed", fill: 'tozeroy' }
        ];

        Plotly.newPlot('myDiv', plot, layout, config);
    });


</script>
<div id=myDiv></div>
